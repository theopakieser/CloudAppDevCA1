"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.handler = void 0;
const client_dynamodb_1 = require("@aws-sdk/client-dynamodb");
const util_dynamodb_1 = require("@aws-sdk/util-dynamodb");
const client = new client_dynamodb_1.DynamoDBClient({});
const handler = async (event) => {
    try {
        const movieId = event.pathParameters?.id;
        const actorId = event.pathParameters?.actorId;
        if (!movieId || !actorId) {
            return { statusCode: 400, body: JSON.stringify({ error: "Movie ID and Actor ID required" }) };
        }
        const pk = `c${movieId}`;
        const sk = actorId;
        const data = await client.send(new client_dynamodb_1.GetItemCommand({
            TableName: process.env.TABLE_NAME,
            Key: { pk: { S: pk }, sk: { S: sk } },
        }));
        if (!data.Item) {
            return { statusCode: 404, body: JSON.stringify({ message: "Cast member not found" }) };
        }
        const castMember = (0, util_dynamodb_1.unmarshall)(data.Item);
        return { statusCode: 200, body: JSON.stringify(castMember) };
    }
    catch (err) {
        console.error("Error in GetActorInMovieLambda:", err);
        return { statusCode: 500, body: JSON.stringify({ error: err.message }) };
    }
};
exports.handler = handler;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZ2V0QWN0b3JJbk1vdmllLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiZ2V0QWN0b3JJbk1vdmllLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7OztBQUFBLDhEQUEwRTtBQUMxRSwwREFBb0Q7QUFHcEQsTUFBTSxNQUFNLEdBQUcsSUFBSSxnQ0FBYyxDQUFDLEVBQUUsQ0FBQyxDQUFDO0FBRS9CLE1BQU0sT0FBTyxHQUFHLEtBQUssRUFBRSxLQUEyQixFQUFrQyxFQUFFO0lBQzNGLElBQUksQ0FBQztRQUNILE1BQU0sT0FBTyxHQUFHLEtBQUssQ0FBQyxjQUFjLEVBQUUsRUFBRSxDQUFDO1FBQ3pDLE1BQU0sT0FBTyxHQUFHLEtBQUssQ0FBQyxjQUFjLEVBQUUsT0FBTyxDQUFDO1FBRTlDLElBQUksQ0FBQyxPQUFPLElBQUksQ0FBQyxPQUFPLEVBQUUsQ0FBQztZQUN6QixPQUFPLEVBQUUsVUFBVSxFQUFFLEdBQUcsRUFBRSxJQUFJLEVBQUUsSUFBSSxDQUFDLFNBQVMsQ0FBQyxFQUFFLEtBQUssRUFBRSxnQ0FBZ0MsRUFBRSxDQUFDLEVBQUUsQ0FBQztRQUNoRyxDQUFDO1FBRUQsTUFBTSxFQUFFLEdBQUcsSUFBSSxPQUFPLEVBQUUsQ0FBQztRQUN6QixNQUFNLEVBQUUsR0FBRyxPQUFPLENBQUM7UUFFbkIsTUFBTSxJQUFJLEdBQUcsTUFBTSxNQUFNLENBQUMsSUFBSSxDQUM1QixJQUFJLGdDQUFjLENBQUM7WUFDakIsU0FBUyxFQUFFLE9BQU8sQ0FBQyxHQUFHLENBQUMsVUFBVTtZQUNqQyxHQUFHLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxDQUFDLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsQ0FBQyxFQUFFLEVBQUUsRUFBRSxFQUFFO1NBQ3RDLENBQUMsQ0FDSCxDQUFDO1FBRUYsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQztZQUNmLE9BQU8sRUFBRSxVQUFVLEVBQUUsR0FBRyxFQUFFLElBQUksRUFBRSxJQUFJLENBQUMsU0FBUyxDQUFDLEVBQUUsT0FBTyxFQUFFLHVCQUF1QixFQUFFLENBQUMsRUFBRSxDQUFDO1FBQ3pGLENBQUM7UUFFRCxNQUFNLFVBQVUsR0FBRyxJQUFBLDBCQUFVLEVBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO1FBQ3pDLE9BQU8sRUFBRSxVQUFVLEVBQUUsR0FBRyxFQUFFLElBQUksRUFBRSxJQUFJLENBQUMsU0FBUyxDQUFDLFVBQVUsQ0FBQyxFQUFFLENBQUM7SUFDL0QsQ0FBQztJQUFDLE9BQU8sR0FBUSxFQUFFLENBQUM7UUFDbEIsT0FBTyxDQUFDLEtBQUssQ0FBQyxpQ0FBaUMsRUFBRSxHQUFHLENBQUMsQ0FBQztRQUN0RCxPQUFPLEVBQUUsVUFBVSxFQUFFLEdBQUcsRUFBRSxJQUFJLEVBQUUsSUFBSSxDQUFDLFNBQVMsQ0FBQyxFQUFFLEtBQUssRUFBRSxHQUFHLENBQUMsT0FBTyxFQUFFLENBQUMsRUFBRSxDQUFDO0lBQzNFLENBQUM7QUFDSCxDQUFDLENBQUM7QUE3QlcsUUFBQSxPQUFPLFdBNkJsQiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IER5bmFtb0RCQ2xpZW50LCBHZXRJdGVtQ29tbWFuZCB9IGZyb20gXCJAYXdzLXNkay9jbGllbnQtZHluYW1vZGJcIjtcclxuaW1wb3J0IHsgdW5tYXJzaGFsbCB9IGZyb20gXCJAYXdzLXNkay91dGlsLWR5bmFtb2RiXCI7XHJcbmltcG9ydCB7IEFQSUdhdGV3YXlQcm94eUV2ZW50LCBBUElHYXRld2F5UHJveHlSZXN1bHQgfSBmcm9tIFwiYXdzLWxhbWJkYVwiO1xyXG5cclxuY29uc3QgY2xpZW50ID0gbmV3IER5bmFtb0RCQ2xpZW50KHt9KTtcclxuXHJcbmV4cG9ydCBjb25zdCBoYW5kbGVyID0gYXN5bmMgKGV2ZW50OiBBUElHYXRld2F5UHJveHlFdmVudCk6IFByb21pc2U8QVBJR2F0ZXdheVByb3h5UmVzdWx0PiA9PiB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IG1vdmllSWQgPSBldmVudC5wYXRoUGFyYW1ldGVycz8uaWQ7XHJcbiAgICBjb25zdCBhY3RvcklkID0gZXZlbnQucGF0aFBhcmFtZXRlcnM/LmFjdG9ySWQ7XHJcblxyXG4gICAgaWYgKCFtb3ZpZUlkIHx8ICFhY3RvcklkKSB7XHJcbiAgICAgIHJldHVybiB7IHN0YXR1c0NvZGU6IDQwMCwgYm9keTogSlNPTi5zdHJpbmdpZnkoeyBlcnJvcjogXCJNb3ZpZSBJRCBhbmQgQWN0b3IgSUQgcmVxdWlyZWRcIiB9KSB9O1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IHBrID0gYGMke21vdmllSWR9YDtcclxuICAgIGNvbnN0IHNrID0gYWN0b3JJZDtcclxuXHJcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgY2xpZW50LnNlbmQoXHJcbiAgICAgIG5ldyBHZXRJdGVtQ29tbWFuZCh7XHJcbiAgICAgICAgVGFibGVOYW1lOiBwcm9jZXNzLmVudi5UQUJMRV9OQU1FLFxyXG4gICAgICAgIEtleTogeyBwazogeyBTOiBwayB9LCBzazogeyBTOiBzayB9IH0sXHJcbiAgICAgIH0pXHJcbiAgICApO1xyXG5cclxuICAgIGlmICghZGF0YS5JdGVtKSB7XHJcbiAgICAgIHJldHVybiB7IHN0YXR1c0NvZGU6IDQwNCwgYm9keTogSlNPTi5zdHJpbmdpZnkoeyBtZXNzYWdlOiBcIkNhc3QgbWVtYmVyIG5vdCBmb3VuZFwiIH0pIH07XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgY2FzdE1lbWJlciA9IHVubWFyc2hhbGwoZGF0YS5JdGVtKTtcclxuICAgIHJldHVybiB7IHN0YXR1c0NvZGU6IDIwMCwgYm9keTogSlNPTi5zdHJpbmdpZnkoY2FzdE1lbWJlcikgfTtcclxuICB9IGNhdGNoIChlcnI6IGFueSkge1xyXG4gICAgY29uc29sZS5lcnJvcihcIkVycm9yIGluIEdldEFjdG9ySW5Nb3ZpZUxhbWJkYTpcIiwgZXJyKTtcclxuICAgIHJldHVybiB7IHN0YXR1c0NvZGU6IDUwMCwgYm9keTogSlNPTi5zdHJpbmdpZnkoeyBlcnJvcjogZXJyLm1lc3NhZ2UgfSkgfTtcclxuICB9XHJcbn07XHJcbiJdfQ==